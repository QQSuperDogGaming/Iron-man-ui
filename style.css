:root{
  /* Primary theme color (hex + rgb for alpha uses) */
  --cy: #00faff;
  --cy-rgb: 0, 250, 255;

  --bg:#05070a;
  --glass: rgba(var(--cy-rgb), .08);

  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);
}

*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0; background:var(--bg); color:#fff;   /* ðŸ”¹ default text = white */
  font-family: ui-sans-serif, system-ui, Segoe UI, Roboto, Arial, sans-serif;
  overflow:hidden;
  font-size: clamp(12px, 1.8vmin, 16px);
  transition: color .6s ease, background-color 1.2s ease;
}

/* Layers */
#stars, .grid, .scan { position: fixed; inset: 0; }
#stars { z-index:0; display:block; }

/* Grid uses theme color variables (no hard-coded cyan) */
.grid{
  z-index:0; pointer-events:none; transition: filter 2s ease;
  background:
    linear-gradient(to right, rgba(var(--cy-rgb), .28) 1px, transparent 1px) 0 0/200px 100%,
    linear-gradient(to bottom, rgba(var(--cy-rgb), .28) 1px, transparent 1px) 0 0/100% 200px,
    linear-gradient(to right, rgba(var(--cy-rgb), .10) 1px, transparent 1px) 0 0/40px 100%,
    linear-gradient(to bottom, rgba(var(--cy-rgb), .10) 1px, transparent 1px) 0 0/100% 40px,
    radial-gradient(1200px 800px at 50% 50%, #061115 0%, #060c0f 55%, #05070a 100%);
}

/* Scanlines themed too */
.scan{
  z-index:1; pointer-events:none;
  background: repeating-linear-gradient(
    to bottom, rgba(var(--cy-rgb), .05), rgba(var(--cy-rgb), .05) 2px, transparent 2px, transparent 6px
  );
  mix-blend-mode: screen; animation: scan 6s linear infinite;
}
@keyframes scan { 0%{transform:translateY(-20%)} 100%{transform:translateY(20%)} }

/* Red veil for alert mode */
#redveil{
  position:fixed; inset:0; pointer-events:none; z-index:3;
  background: radial-gradient(circle at 50% 50%, rgba(255,0,0,0.0), rgba(255,0,0,0.10));
  opacity:0; transition: opacity 3s ease;
}

/* HUD fills real viewport (JS sets --vh) */
.hud{
  position: fixed; inset: 0;
  width: 100vw;
  height: calc(var(--vh, 1vh) * 100);
  z-index: 2;
  padding: calc(var(--safe-top) + 0px) calc(var(--safe-right) + 0px)
           calc(var(--safe-bottom) + 0px) calc(var(--safe-left) + 0px);
}

/* Core */
.core{
  position:absolute; left:50%; top:50%;
  transform: translate(-50%, -50%);
  width:min(58vmin, 520px); height:min(58vmin, 520px);
  display:grid; place-items:center;
  filter: drop-shadow(0 0 12px var(--cy)) drop-shadow(0 0 28px rgba(var(--cy-rgb), .25));
  transition: filter 1.5s ease;
}
.ring{
  position:relative; width:100%; height:100%; border-radius:50%;
  border:2px solid var(--cy); box-shadow: inset 0 0 40px rgba(var(--cy-rgb), .35);
  transition: border-color 1.2s ease, box-shadow 1.2s ease;
}
.ring:before, .ring:after{
  content:""; position:absolute; inset:7%; border-radius:50%;
  border:2px dashed rgba(var(--cy-rgb), .75);
  filter: drop-shadow(0 0 6px var(--cy));
}
.ring:before{ animation:spin 16s linear infinite }
.ring:after { inset:18%; border-style:dotted; animation:spin 8s linear reverse infinite }
.disc{
  position:absolute; width:45%; height:45%; border-radius:50%;
  background: radial-gradient(circle at 50% 50%, rgba(var(--cy-rgb), .85), rgba(var(--cy-rgb), .25) 60%, transparent 70%);
  border:2px solid rgba(var(--cy-rgb), .8); animation:pulse 2.2s ease-in-out infinite;
  transition: border-color 1.2s ease, background 1.2s ease;
}
.label{
  position:absolute; inset:auto 0 14%;
  text-align:center;
  letter-spacing:.25em;
  font-weight:900;
  font-size:1.3em;
  color:#fff;                                    /* ðŸ”¹ force label text white */
  text-shadow:0 0 10px var(--cy), 0 0 20px rgba(var(--cy-rgb), .6);
  transition: color 1.2s ease, text-shadow 1.2s ease;
}
@keyframes spin{ to{ transform:rotate(360deg) } }
@keyframes pulse{
  0%,100%{ box-shadow:0 0 18px 6px rgba(var(--cy-rgb), .45) }
  50%{ box-shadow:0 0 36px 14px rgba(var(--cy-rgb), .75) }
}

/* Widgets */
.widget{
  position:absolute; padding:10px 14px; min-width: clamp(160px, 26vmin, 260px);
  border:1px solid var(--cy); border-radius:10px;
  background:linear-gradient(180deg, var(--glass), rgba(var(--cy-rgb), .03));
  box-shadow:0 0 18px rgba(var(--cy-rgb), .35), inset 0 0 18px rgba(var(--cy-rgb), .12);
  backdrop-filter: blur(3px);
  color:#fff;                                   /* ðŸ”¹ widget body text white */
  transition: border-color 1.2s ease, box-shadow 1.2s ease, color 1.2s ease;
}
.widget h4{ 
  margin:.1rem 0 .35rem; 
  font-size:.9rem; 
  color: var(--cy);                             /* ðŸ”¹ headings keep theme color */
  opacity:.9 
}
.row{ display:flex; gap:.5rem; align-items:baseline }
.muted{ opacity:.7; font-size:.85rem; color:#fff }  /* ðŸ”¹ muted text still white */
.chip{
  display:inline-block; padding:.2rem .5rem; border:1px solid var(--cy);
  border-radius:999px; background:rgba(var(--cy-rgb), .08); font-size:.8rem;
  color:#fff;                                   /* ðŸ”¹ chip text white */
}

/* Buttons, bars, log */
.btn{
  cursor:pointer; padding:.35rem .6rem; border-radius:8px;
  border:1px solid var(--cy); background:rgba(var(--cy-rgb), .08); 
  color:#fff;                                   /* ðŸ”¹ button text white */
  transition: border-color 1.2s ease, color 1.2s ease, background .3s;
}
.btn:hover{ filter:brightness(1.1) }
.bar{ width:100%; height:8px; border:1px solid var(--cy); border-radius:999px; margin:.4rem 0; transition: border-color 1.2s ease; }
.bar > div{
  height:100%; background:var(--cy); width:0%; border-radius:999px;
  box-shadow:0 0 10px var(--cy);
  transition: background-color 1.2s ease, box-shadow 1.2s ease;
}
.log{
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size:.82rem; max-height:120px; overflow:auto; border-top:1px solid rgba(var(--cy-rgb), .2); padding-top:.4rem;
  color:#fff;                                   /* ðŸ”¹ console text white */
}

/* Radar */
.radar{
  position:relative; width:220px; height:220px; border-radius:50%;
  border:1px solid var(--cy); overflow:hidden;
  background:
    radial-gradient(circle at center, rgba(var(--cy-rgb), .25) 0 1px, transparent 1px) 0 0/18px 18px,
    radial-gradient(circle at center, rgba(var(--cy-rgb), .12) 0 2px, transparent 2px) 0 0/36px 36px,
    radial-gradient(100px 100px at center, rgba(var(--cy-rgb), .08), transparent 70%);
  transition: border-color 1.2s ease;
}

/* Glitch readability fix */
.glitch{ position: relative; color:#fff; }      /* ðŸ”¹ glitch text white */
.glitch::before{
  content: attr(data-text);
  position:absolute; left:0; right:0; text-align:center;
  transform: translate(-2px, 0);
  text-shadow: -2px 0 #ff7043; /* orange-red */
  clip-path: inset(0 0 0 0); opacity:.8;
  animation: glitch-1 1.8s infinite linear alternate-reverse;
}
.glitch::after{
  content: attr(data-text);
  position:absolute; left:0; right:0; text-align:center;
  transform: translate(2px, 0);
  text-shadow: 2px 0 #ef5350; /* lighter red */
  clip-path: inset(0 0 0 0); opacity:.8;
  animation: glitch-2 2.1s infinite linear alternate-reverse;
}

/* ALERT MODE â€” deeper red */
body.alert{
  --cy: #e53935;
  --cy-rgb: 229, 57, 53;
  background: #0a0505;
}
body.alert #redveil{ opacity: 1; }

/* Help overlay */
.help-card{
  border: 1px solid var(--cy);
  background: linear-gradient(180deg, var(--glass), rgba(var(--cy-rgb), .03));
  box-shadow: 0 0 24px rgba(var(--cy-rgb), .35);
  color:#fff;                                   /* ðŸ”¹ help text white */
}
.help-card h3{ color: var(--cy); }              /* ðŸ”¹ help heading themed */
.help-card b{ color:#fff; }
